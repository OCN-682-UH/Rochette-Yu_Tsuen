---
title: "Week 15 - Tidy Tuesday 6, an Introduction to Quarto Articles (not a true publication)"
format:
  plos-pdf:
    number-sections: false
    journal:
      id: globalpublichealth 
    include-in-header:
      text: |
        % Remove comment for double spacing
        % \usepackage{setspace} 
        % \doublespacing
author:
  - name: Keanu Rochette-Yu Tsuen
    equal-contributor: true
    affiliations:
      - ref: aff1
      - ref: aff2
    notes: |
       "1234 University Road: Department of Oceanography, Univeristy of Hawaii, Honolulu, HI, U.S.A."
author-notes:
  equal-contributor: These authors contributed equally to this work.
  deceased: Deceased
  group: Membership list can be found in the Acknowledgments sections
affiliations:
  - id: aff1
    name: Department of Oceanography, University of Hawai'i 
    city: Honolulu
    state: HI
    country: USA
  - id: aff2
    name: MCR LTER
    city: Paopao
    state: Moorea
    country: French Polynesia
abstract: |
  Generated by ChatGPT as placeholder: The United States boasts one of the largest and most extensive highway systems in the world, facilitating efficient travel across its vast landscapes. The Interstate Highway System, established in 1956, is the backbone of long-distance road travel. These highways are numbered using a systematic scheme: odd-numbered interstates run north-south (e.g., I-5 on the West Coast), while even-numbered interstates run east-west (e.g., I-10 in the southern U.S.). Three-digit interstates typically serve metropolitan areas or act as bypasses and spurs. Speed limits on highways vary by state but generally range between 55 mph (88 km/h) and 75 mph (120 km/h). In rural areas, some highways allow speeds up to 80 mph (130 km/h), particularly in states like Texas and Utah. Urban interstates often have lower limits to accommodate heavier traffic and ensure safety.Safety on highways is paramount. Drivers should maintain a safe following distance, as high speeds reduce reaction times. Always use seat belts and adhere to posted speed limits. Stay vigilant in construction zones where conditions can change rapidly. Avoid distractions such as texting, and never drive under the influence of alcohol or drugs. In case of breakdowns, pull over safely, turn on hazard lights, and stay inside your vehicle if traffic is heavy.Planning your route with updated GPS and weather forecasts can make your highway travel smoother and safer. With proper precautions, highways can be an efficient and enjoyable way to explore the U.S.
  
author-summary: |
  Hi, I'm Keanu and I am a first year master student at the University of Hawai'i at MƒÅnoa. I'm currently taking the MBIO612/OCN682 class to learn how to code in R and use it for data science. 
  
bibliography: bibliography.bib 
---

# Introduction

This week, I decided to learn how to use RStudio and Quarto files to make publishable and reproducible journal articles. I chose the template from PLOS.  
We'll be looking at the National Highway Traffic Flow data from Tidy Tuesday.


# Materials and methods 

```{r}
#| label: Load libraries
#| echo: true
#| message: false
library(tidyverse)
library(gt)
library(janitor)
library(ghibli)
```

```{r}
#| label: Load the data
#| echo: true

tuesdata <- tidytuesdayR::tt_load('2024-12-03')
traffic <- tuesdata$A64_traffic
```

```{r}
#| label: Data Clean-Up
#| echo: true
traffic_clean <- traffic %>% clean_names() %>% 
  select(-site_id, -site_name, -report_date, -time_period_ending, -time_interval,
         -name, -longitude, -latitude) %>% 
  rename(`0-520` = x0_520_cm,
         `521-660` = x521_660_cm,
         `661-1160` = x661_1160_cm,
         `Over 1160` = x1160_cm) %>% 
  pivot_longer(cols = `0-520`:`Over 1160`,
               names_to = "size_class_cm",
               values_to = "num_by_size") %>% 
  pivot_longer(cols = x0_10_mph:x80_mph,
               names_to = "speed_cat_mph",
               values_to = "num_by_speed") %>% 
  mutate(speed_cat_mph = str_replace(speed_cat_mph, "x", ""),
         speed_cat_mph = str_replace(speed_cat_mph, "_mph", ""),
         speed_cat_mph = str_replace(speed_cat_mph, "_", "-"), 
         speed_cat_mph = ifelse(speed_cat_mph == "80", "Over 80", speed_cat_mph),
         size_class_cm = as.factor(size_class_cm)) 
```


```{r}
#| label: Size Distribution 
#| echo: true
size <- traffic_clean %>% 
  ggplot(aes(x= size_class_cm, y= num_by_size, fill = size_class_cm))+
  geom_boxplot() +
  labs(title = "Distribution of vehicules by size class",
       x = "Size Classes (cm)",
       y = "Number of Vehicles") +
  theme_bw() + 
  theme(plot.title = element_text(size=14, face = "bold"), 
        plot.subtitle = element_text(size=12),
        axis.title = element_text(size = 12, face = "bold"),
        axis.text = element_text(size = 12),
        strip.text.x = element_text(size = 12, face = "bold"),
        legend.title=element_text(size=12, face = "bold"),
        legend.text=element_text(size=12),
        legend.position = "none",
        panel.background = element_rect(fill = "azure1"))+
  #custom the colors 
  scale_fill_ghibli_d("MarnieMedium1", direction =-1)
```



```{r}
#| label: Speed Distribution 
#| echo: true
speed <- traffic_clean %>% group_by(speed_cat_mph) %>% 
  summarize(avg_by_speed = mean(num_by_speed, na.rm = T)) %>% 
  ggplot(aes(x= speed_cat_mph, y= avg_by_speed, fill = speed_cat_mph))+
  geom_bar(stat= "identity")+
  labs(title = "Distribution of vehicules by speeding category",
       x = "Speed Categories",
       y = "Average Number of Vehicles") +
  theme_bw() + 
  theme(plot.title = element_text(size=14, face = "bold"), 
        plot.subtitle = element_text(size=12),
        axis.title = element_text(size = 12, face = "bold"),
        axis.text = element_text(size = 12),
        axis.text.x = element_text(angle = 30, vjust = 0.8, hjust=0.5),
        legend.title=element_text(size=12, face = "bold"),
        legend.text=element_text(size=12),
        legend.position = "none",
        panel.background = element_rect(fill = "azure1"))
```


# Results

```{r}
#| label: Showing size class distribution 
#| echo: true
size
```

```{r}
#| label: Showing speed category distribution
#| echo: true
speed 
```

# Discussion
I can reference figures here 
I can also add citations like that. All the citations with be added to the bibliography and the reference.

# Conclusion


# Acknowledgments

